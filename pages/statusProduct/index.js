import { useState,useEffect } from "react";
import Link from "next/link";
import Head from "next/head";
import {
  Box,
  Flex,
  Grid,
  Text,
  GridItem,
  Image,
  Button,
  Spacer,
} from "@chakra-ui/react";
import Statusproduct from "@/components/StatusProduct";
import axios from "axios";
function useStatusProduct() {
  const [orders, setOrders] = useState([]);
  const storedOwner = localStorage.getItem("owner_shop_id");
  const OwnerShopId = storedOwner ? JSON.parse(storedOwner) : [];
  useEffect(() => {
    async function fetchdata() {
      let user_id = 1;
      const formdataOrder = new FormData();
      formdataOrder.append("user_id",user_id);
      formdataOrder.append("OwnerShopId.owner_shop_id", OwnerShopId.owner_shop_id);
      const order = await axios.post(
        `https://shopee-api.deksilp.com/api/getAllOrder`,formdataOrder
      );
      setOrders(order.data.orders);
    }
    fetchdata();
  }, []);
  return (
    <>
      <Head>
        <title>order</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Box pt="15px">
        <Statusproduct data={orders} />
      </Box>
    </>
  );
}

export default useStatusProduct;
